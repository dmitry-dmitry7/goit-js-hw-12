{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      key: \"54671046-ae95888271e1d1b9b249768ad\",\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page: page,\n      per_page: \"15\"\n\t  }\n  })\n  return response.data; \n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\"ul.gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet galleryShow =  new SimpleLightbox('.gallery a', {captionsData: 'alt', captionDelay: 250});\n\nexport function createGallery(images) {\n  const content = images\n    .map((image) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\"\n          />\n          <div class = \"gallery-text\">\n            <ul class = \"gallery-text-list\">\n              <li><b>Likes</b></li>\n              <li>${image.likes}</li>\n            </ul>\n            <ul class = \"gallery-text-list\">\n              <li><b>Views</b></li>\n              <li>${image.views}</li>\n            </ul>\n            <ul class = \"gallery-text-list\">\n              <li><b>Comments</b></li>\n              <li>${image.comments}</li>\n            </ul>\n            <ul class = \"gallery-text-list\">\n              <li><b>Downloads</b></li>\n              <li>${image.downloads}</li>\n            </ul>                        \n          </div>\n        </a>\n      </li>\n      `)\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", content);\n  galleryShow.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\n\nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nform.addEventListener(\"submit\", handleSubmit);\n\nlet searchText = \"\";\nconst perPage = 15;\nlet page;\nlet totalPages;\n\nhideLoadMoreButton();\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  hideLoadMoreButton();\n\n  searchText = event.target.elements[0].value.trim();\n  if(!searchText.length) {\n    iziToast.warning({\n      message: 'The line must not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();  \n  showLoader();\n  try {\n    const response = await getImagesByQuery(searchText, page);\n    \n    totalPages = Math.ceil(response.totalHits / perPage);\n    const images = response.hits; \n    if (images.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      createGallery(images);\n      if (totalPages > 1) {\n        showLoadMoreButton();\n        page++;\n      } else {\n          iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n          });\n      }\n    }\n  } catch(error) {\n  \t  iziToast.error({\n        message: error.message,\n        position: 'topRight',\n      });\n  } finally {\n      hideLoader();\n  }\n  form.reset();\n}\n\nloadMoreBtn.addEventListener(\"click\", handleClick);\n\nasync function handleClick(event) {\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const response = await getImagesByQuery(searchText, page);\n    const images = response.hits;\n    createGallery(images);\n    const box = document.querySelector(\".gallery-item\");\n    const rect = box.getBoundingClientRect();\n    window.scrollBy(0, rect.height * 2);\n    \n    showLoadMoreButton();\n    if (page === totalPages) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n    } else {\n        page++;\n    }\n  } catch(error) {\n  \t  iziToast.error({\n        message: error.message,\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n  }\n}"],"names":["getImagesByQuery","query","page","axios","gallery","loader","loadMoreBtn","galleryShow","SimpleLightbox","createGallery","images","content","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","handleSubmit","searchText","perPage","totalPages","event","iziToast","response","error","handleClick","rect"],"mappings":"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"}